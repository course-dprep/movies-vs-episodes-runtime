---
title: "DATA EXPLORATION"
output:
  html_document: default
date: "2025-10-10"
---

# INTRODUCTION
This document provides a detailed report of our data exploration where we focus on exploring the raw data before any cleaning or modeling occurs, including:
- How the datasets were loaded
- Data quality observations: missing values and outliers
- An overview of the structure and the relevant variables 

# RESEARCH QUESTION
How does runtime influence audience ratings for movies compared to TV episodes, controlling for the release year?

# RESEARCH METHOD
By conducting a multiple linear regression, we will estimate the independent effect of runtime on ratings while controlling for release year and content type (movie/TV episode).

# DEPENDENCIES 
For the data exploration step, we used the following dependencies: 
- R
- Make
- Installed packages in R: 
```{r, setup, include=FALSE}
library(tidyverse)
library(ggplot2)
library(data.table)
library(here)
```

# LOADING THE DATASETS
Two separate datasets were acquired from IMDb (https://datasets.imdbws.com/):
- The first dataset contains information on the contents' duration and release year, saved as "title_basics_raw" 
- The second dataset contains information on the contents' ratings, saved as "ratings_raw"

The following chunk of code will first create the folder "raw" to store the raw datasets, and second, load the datasets into R: 
```{r, eval=FALSE}
# Download and Save function
download_and_save <- function(url, file) write_tsv(read_tsv(url, na = c("\\N", "")), here(file))

# Retrieve datasets
datasets <- c(
  "raw/title_basics_raw.tsv" = "https://datasets.imdbws.com/title.basics.tsv.gz",
  "raw/ratings_raw.tsv"     = "https://datasets.imdbws.com/title.ratings.tsv.gz")

# Save the downloaded datasets to folder "raw"
walk2(datasets, names(datasets), download_and_save)
```

# DATA QUALITY OBSERVATIONS
The following chunk of code provides a data quality check to identify missing values and outliers:
```{r, warning = FALSE, message = FALSE}
# Data quality check for title_basics_raw
  # Missing values
title_basics_raw <- read_tsv(here("raw/title_basics_raw.tsv"), na = c("\\N", ""), show_col_types = FALSE)
ratings_raw <- read_tsv(here("raw/ratings_raw.tsv"), na = c("\\N", ""), show_col_types = FALSE)
title_basics_raw$runtimeMinutes <- as.numeric(title_basics_raw$runtimeMinutes)
ratings_raw$averageRating <- as.numeric(ratings_raw$averageRating)
colSums(is.na(title_basics_raw[c("tconst", "primaryTitle", "startYear", "runtimeMinutes")]))

  # Outliers 
setDT(title_basics_raw)
ggplot(title_basics_raw, aes(x = runtimeMinutes)) +
  geom_histogram(binwidth = 10, fill = "skyblue", color = "black") +
  coord_cartesian(xlim = c(0, 300)) +  # focus on typical runtimes
  labs(x = "Runtime (minutes)", y = "Count", title = "Distribution of (all) Runtimes")

# Data quality check for title_ratings
  # Missing values
colSums(is.na(ratings_raw[c("tconst","averageRating")]))

  # Outliers
setDT(ratings_raw)
ggplot(ratings_raw, aes(x = averageRating)) +
  geom_histogram(binwidth = 0.5, fill = "skyblue", color = "black") +
  coord_cartesian(xlim = c(0, 10)) +  
  labs(x = "Rating", y = "Count", title = "Distribution of (all) ratings")
```


# OVERVIEW OF THE STRUCTURE AND RELEVANT VARIABLES
Below you will find the variable names and descriptions that are relevant to this study.
1. tconst(string): alphanumeric unique identifier of the title
2. primaryTitle (string):the more popular title/the title used by the filmmakers on promotional materials at the point of release
3. startYear: represents the release year of a title
4. runtimeMinutes: primary runtime of the title, in minutes
5. averageRating: weighted average of all the individual user ratings
6. is_tvepisode (boolean):  0: content type is Movie, 1: content type is TV Episode



